#!/bin/bash

# insert key
ENDPOINT="https://api.openai.com/v1/engines/davinci-codex/completions"
ACCESS_TOKEN="YOUR_OPENAI_ACCESS_TOKEN"

# send text and get response
function query_openai_api() {
    local prompt="$1"
    local response=$(curl -s -X POST \
        -H "Content-Type: application/json" \
        -H "Authorization: Bearer $ACCESS_TOKEN" \
        -d "{\"prompt\": \"$prompt\", \"max_tokens\": 100}" \
        "$ENDPOINT")
    local generated_text=$(echo "$response" | grep -o '"text": "[^"]*' | cut -d'"' -f4)
    echo "$generated_text"
}

# for input 
read -p "Ask me a question: " user_input

# for output
response=$(query_openai_api "$user_input")

# to display
echo "AI: $response"
